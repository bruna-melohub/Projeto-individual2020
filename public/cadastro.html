<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boss Cactos</title>
    <link rel="sho" href="">
    <link rel="shortcut icon" href="imagens/logoblack.png">
    <link rel="stylesheet" href="CSS/menu-rodape.css">
    <link rel="stylesheet" href="CSS/cadastro.css">
    <script src="JS/login.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
</head>

<body>
    <!--------------------------------------------------------- MENU -->

    <div class="wrap">
        <nav>
            <img src="imagens/logoblack.png" class="logo" alt="">
            <b>Boss Cactos</b>
            <ul>
                <li><a class="menu" href="index.html">Home</a></li>
                <li><a class="menu" href="especies.html">Espécies de Cactos</a></li>
                <li><a class="menu" href="contato.html">Contato</a></li>
                <li><a class="menu" href="cadastro.html">Cadastro</a></li>
                <li><a class="menu" href="login.html">Login</a></li>
            </ul>
        </nav>
    </div>

    <!-- ------------------------------------ conteudo cadastro -->
    <div class="pag-login">
        <div class="container">
            <div class="box-login">
                <h1>Cadastre-se!</h1>

                <form id="form_cadastro" method="post" onsubmit="return cadastrar()">
                    <label for="nome"></label>
                    <input type="text" name="nome" class="input-padrao" autofocus="autofocus"
                        placeholder="Nome e Sobrenome" required minlength="4">
                    <label for="login"></label>
                    <input type="text" name="login" class="input-padrao" placeholder="Usuário para login" required
                        minlength="4">
                    <label for="senha"></label>
                    <input type="password" name="senha" class="input-padrao" placeholder="Senha" required minlength="4">

                    <input type="submit" id="btn_entrar" value="Cadastrar" class="btn">
                </form>

                <img src="imagens/carregando.gif" id="img_aguarde" style="display: none;" width="100px">

                <div id="div_erro" class="msg_erro"
                    style="background-color: #608b5a; color: rgb(177, 0, 0); display: none; font-weight: bold;">
                    Erro no cadastro
                </div>
            </div>
        </div>
    </div>
    </div>


    <div class="container-footer">
        <footer>
            <div class="footer-content">
                <img src="imagens/logoblack.png" class="footer-logo">
                <h2>Boss Cactos</h2>
                <p>"Eu sei que pareço um cacto. Mas é que tenho o pé atrás, tenho medo.
                    Os espinhos são as minhas armas, minha defesa. Sou difícil de me abrir.
                    Mas te digo uma coisa, se você souber esperar, me passar segurança eu prometo que também sei dar
                    flor."</p>
                <ul class="redes-sociais">
                    <li><img src="imagens/facebook.png" alt=""></li>
                    <li><img src="imagens/instagram.png" alt=""></li>
                    <li><img src="imagens/linkedin.png" alt=""></li>
                    <li><img src="imagens/twitter.png" alt=""></li>
                    <li><img src="imagens/youtube.png" alt=""></li>
                </ul>
            </div>
            <div class="footer-bottom">
                <p>copyright &copy; 2020 site desenvolvido por uma aluna <span>Bandtec</span>
                    &#128154;</p>
            </div>
        </footer>
    </div>
</body>

</html>
<script>
    function cadastrar() {
        aguardar();
        var formulario = new URLSearchParams(new FormData(form_cadastro));
        fetch("/usuarios/cadastrar", {
            method: "POST",
            body: formulario
        }).then(function (response) {

            if (response.ok) {

                window.location.href = 'login.html';

            } else {

                console.log('Erro de cadastro!');
                response.text().then(function (resposta) {
                    div_erro.innerHTML = resposta;
                });
                finalizar_aguardar();
            }
        });

        return false;
    }

    function aguardar() {
        btn_entrar.disabled = true;
        img_aguarde.style.display = 'block';
        div_erro.style.display = 'none';
    }

    function finalizar_aguardar() {
        btn_entrar.disabled = false;
        img_aguarde.style.display = 'none';
        div_erro.style.display = 'block';
    }

</script>